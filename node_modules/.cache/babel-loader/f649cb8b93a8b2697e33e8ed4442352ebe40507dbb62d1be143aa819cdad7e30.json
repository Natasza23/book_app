{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\natsz\\\\Desktop\\\\book_app\\\\src\\\\components\\\\context\\\\appContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { createContext, useContext, useState, useEffect } from 'react';\nimport { auth, db } from '../firebase';\nimport { collection, doc, setDoc, getDoc, onSnapshot } from 'firebase/firestore';\nimport { onAuthStateChanged } from 'firebase/auth';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AppContext = /*#__PURE__*/createContext();\nexport const useAppContext = () => {\n  _s();\n  return useContext(AppContext);\n};\n_s(useAppContext, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nexport const AppProvider = ({\n  children\n}) => {\n  _s2();\n  const [user, setUser] = useState(null);\n  const [favorites, setFavorites] = useState([]);\n  const [toReadBooks, setToReadBooks] = useState([]);\n  const [readBooks, setReadBooks] = useState([]);\n  useEffect(() => {\n    const unsubscribe = onAuthStateChanged(auth, user => {\n      if (user) {\n        setUser(user);\n        loadUserData(user.uid);\n      } else {\n        setUser(null);\n        setFavorites([]);\n        setToReadBooks([]);\n        setReadBooks([]);\n      }\n    });\n    return () => unsubscribe();\n  }, []);\n  const loadUserData = async uid => {\n    const userRef = doc(db, 'users', uid);\n    const docSnap = await getDoc(userRef);\n    if (docSnap.exists()) {\n      const data = docSnap.data();\n      setFavorites(data.favorites || []);\n      setToReadBooks(data.toReadBooks || []);\n      setReadBooks(data.readBooks || []);\n    }\n  };\n  const saveUserData = async (uid, data) => {\n    const userRef = doc(db, 'users', uid);\n    await setDoc(userRef, data, {\n      merge: true\n    });\n  };\n  const addToFavorites = book => {\n    if (!favorites.some(fav => fav.id === book.id)) {\n      const updatedFavorites = [...favorites, book];\n      setFavorites(updatedFavorites);\n      if (user) {\n        saveUserData(user.uid, {\n          favorites: updatedFavorites\n        });\n      }\n    }\n  };\n  const removeFromFavorites = bookId => {\n    const updatedFavorites = favorites.filter(book => book.id !== bookId);\n    setFavorites(updatedFavorites);\n    if (user) {\n      saveUserData(user.uid, {\n        favorites: updatedFavorites\n      });\n    }\n  };\n\n  // Similar functions for toReadBooks and readBooks\n\n  const addToToReadBooks = book => {\n    if (!toReadBooks.some(b => b.id === book.id)) {\n      const updatedToReadBooks = [...toReadBooks, book];\n      setToReadBooks(updatedToReadBooks);\n      if (user) {\n        saveUserData(user.uid, {\n          toReadBooks: updatedToReadBooks\n        });\n      }\n    }\n  };\n  const removeFromToReadBooks = bookId => {\n    const updatedToReadBooks = toReadBooks.filter(book => book.id !== bookId);\n    setToReadBooks(updatedToReadBooks);\n    if (user) {\n      saveUserData(user.uid, {\n        toReadBooks: updatedToReadBooks\n      });\n    }\n  };\n  const addToReadBooks = book => {\n    if (!readBooks.some(b => b.id === book.id)) {\n      const updatedReadBooks = [...readBooks, book];\n      setReadBooks(updatedReadBooks);\n      if (user) {\n        saveUserData(user.uid, {\n          readBooks: updatedReadBooks\n        });\n      }\n    }\n  };\n  const removeFromReadBooks = bookId => {\n    const updatedReadBooks = readBooks.filter(book => book.id !== bookId);\n    setReadBooks(updatedReadBooks);\n    if (user) {\n      saveUserData(user.uid, {\n        readBooks: updatedReadBooks\n      });\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(AppContext.Provider, {\n    value: {\n      favorites,\n      addToFavorites,\n      removeFromFavorites,\n      toReadBooks,\n      addToToReadBooks,\n      removeFromToReadBooks,\n      readBooks,\n      addToReadBooks,\n      removeFromReadBooks\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 106,\n    columnNumber: 9\n  }, this);\n};\n_s2(AppProvider, \"+ssQj22z2xoawCGtYjociBb1BBc=\");\n_c = AppProvider;\nvar _c;\n$RefreshReg$(_c, \"AppProvider\");","map":{"version":3,"names":["React","createContext","useContext","useState","useEffect","auth","db","collection","doc","setDoc","getDoc","onSnapshot","onAuthStateChanged","jsxDEV","_jsxDEV","AppContext","useAppContext","_s","AppProvider","children","_s2","user","setUser","favorites","setFavorites","toReadBooks","setToReadBooks","readBooks","setReadBooks","unsubscribe","loadUserData","uid","userRef","docSnap","exists","data","saveUserData","merge","addToFavorites","book","some","fav","id","updatedFavorites","removeFromFavorites","bookId","filter","addToToReadBooks","b","updatedToReadBooks","removeFromToReadBooks","addToReadBooks","updatedReadBooks","removeFromReadBooks","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/natsz/Desktop/book_app/src/components/context/appContext.js"],"sourcesContent":["import React, { createContext, useContext, useState, useEffect } from 'react';\r\nimport { auth, db } from '../firebase'; \r\nimport { collection, doc, setDoc, getDoc, onSnapshot } from 'firebase/firestore';\r\nimport { onAuthStateChanged } from 'firebase/auth';\r\n\r\nconst AppContext = createContext();\r\n\r\nexport const useAppContext = () => {\r\n    return useContext(AppContext);\r\n};\r\n\r\nexport const AppProvider = ({ children }) => {\r\n    const [user, setUser] = useState(null);\r\n    const [favorites, setFavorites] = useState([]);\r\n    const [toReadBooks, setToReadBooks] = useState([]);\r\n    const [readBooks, setReadBooks] = useState([]);\r\n\r\n    useEffect(() => {\r\n        const unsubscribe = onAuthStateChanged(auth, (user) => {\r\n            if (user) {\r\n                setUser(user);\r\n                loadUserData(user.uid);\r\n            } else {\r\n                setUser(null);\r\n                setFavorites([]);\r\n                setToReadBooks([]);\r\n                setReadBooks([]);\r\n            }\r\n        });\r\n        return () => unsubscribe();\r\n    }, []);\r\n\r\n    const loadUserData = async (uid) => {\r\n        const userRef = doc(db, 'users', uid);\r\n        const docSnap = await getDoc(userRef);\r\n        if (docSnap.exists()) {\r\n            const data = docSnap.data();\r\n            setFavorites(data.favorites || []);\r\n            setToReadBooks(data.toReadBooks || []);\r\n            setReadBooks(data.readBooks || []);\r\n        }\r\n    };\r\n\r\n    const saveUserData = async (uid, data) => {\r\n        const userRef = doc(db, 'users', uid);\r\n        await setDoc(userRef, data, { merge: true });\r\n    };\r\n\r\n    const addToFavorites = (book) => {\r\n        if (!favorites.some(fav => fav.id === book.id)) {\r\n            const updatedFavorites = [...favorites, book];\r\n            setFavorites(updatedFavorites);\r\n            if (user) {\r\n                saveUserData(user.uid, { favorites: updatedFavorites });\r\n            }\r\n        }\r\n    };\r\n\r\n    const removeFromFavorites = (bookId) => {\r\n        const updatedFavorites = favorites.filter(book => book.id !== bookId);\r\n        setFavorites(updatedFavorites);\r\n        if (user) {\r\n            saveUserData(user.uid, { favorites: updatedFavorites });\r\n        }\r\n    };\r\n\r\n    // Similar functions for toReadBooks and readBooks\r\n\r\n    const addToToReadBooks = (book) => {\r\n        if (!toReadBooks.some(b => b.id === book.id)) {\r\n            const updatedToReadBooks = [...toReadBooks, book];\r\n            setToReadBooks(updatedToReadBooks);\r\n            if (user) {\r\n                saveUserData(user.uid, { toReadBooks: updatedToReadBooks });\r\n            }\r\n        }\r\n    };\r\n\r\n    const removeFromToReadBooks = (bookId) => {\r\n        const updatedToReadBooks = toReadBooks.filter(book => book.id !== bookId);\r\n        setToReadBooks(updatedToReadBooks);\r\n        if (user) {\r\n            saveUserData(user.uid, { toReadBooks: updatedToReadBooks });\r\n        }\r\n    };\r\n\r\n    const addToReadBooks = (book) => {\r\n        if (!readBooks.some(b => b.id === book.id)) {\r\n            const updatedReadBooks = [...readBooks, book];\r\n            setReadBooks(updatedReadBooks);\r\n            if (user) {\r\n                saveUserData(user.uid, { readBooks: updatedReadBooks });\r\n            }\r\n        }\r\n    };\r\n\r\n    const removeFromReadBooks = (bookId) => {\r\n        const updatedReadBooks = readBooks.filter(book => book.id !== bookId);\r\n        setReadBooks(updatedReadBooks);\r\n        if (user) {\r\n            saveUserData(user.uid, { readBooks: updatedReadBooks });\r\n        }\r\n    };\r\n\r\n    return (\r\n        <AppContext.Provider value={{\r\n            favorites,\r\n            addToFavorites,\r\n            removeFromFavorites,\r\n            toReadBooks,\r\n            addToToReadBooks,\r\n            removeFromToReadBooks,\r\n            readBooks,\r\n            addToReadBooks,\r\n            removeFromReadBooks\r\n        }}>\r\n            {children}\r\n        </AppContext.Provider>\r\n    );\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}